{"version":3,"sources":["js/components/Layout.js","assets/logo.svg","js/hooks/useCurrentUser.js","js/components/NextPageArrow.js","assets/arrow.svg","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","js/pages/Beds.js"],"names":["FooterLink","to","icon","title","selected","useLocation","pathname","routeToPreload","routes","find","route","path","onMouseEnter","undefined","component","preload","className","Layout","children","noFooter","alt","src","logo","module","exports","useCurrentUser","useContext","JwtContext","jsonWebToken","user","setUser","history","useHistory","useState","loading","setLoading","useEffect","fetch","then","response","redirected","json","push","url","data","window","location","href","catch","updatedUser","method","headers","body","JSON","stringify","NextPageArrow","target","label","onClick","arrow","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread2","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","Beds","updateUser","mealPref","setMealPref","saving","setSaving","debouncedCall","useRef","onChange","e","val","current","clearTimeout","setTimeout","hasUpdatedInfos"],"mappings":"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","file":"static/js/3.fe0270a7.chunk.js","sourcesContent":["import React from 'react'\nimport logo from '../../assets/logo.svg'\nimport { Link, useLocation } from 'react-router-dom'\n\nimport routes from '../routes'\n\nconst FooterLink = ({ to, icon, title }) => {\n  const location = useLocation()\n  const selected = location.pathname === to\n  const routeToPreload = routes.find(route => {\n    return route.path === to\n  })\n\n  let onMouseEnter = undefined\n\n  if (routeToPreload) {\n    onMouseEnter = () => {\n      routeToPreload.component.preload()\n    }\n  }\n\n  return (\n    <Link\n      to={to}\n      onMouseEnter={onMouseEnter}\n      className={`Footer--link ${selected ? 'selected' : ''}`}\n    >\n      <i className=\"material-icons\">{icon}</i>\n      <b className=\"Footer--linkTitle\">{title}</b>\n    </Link>\n  )\n}\n\nconst Layout = ({ children, noFooter }) => {\n  return (\n    <>\n      <div className=\"Header\">\n        <img alt=\"Logo\" src={logo} className=\"Header--logo\" />\n      </div>\n      <div className=\"Header--padder\" />\n      {children}\n      {noFooter ? null : (\n        <div className=\"Footer\">\n          <FooterLink to=\"/\" icon=\"assignment_turned_in\" title=\"Statut\" />\n          <FooterLink\n            to=\"/guest\"\n            icon=\"sentiment_very_satisfied\"\n            title=\"Invités\"\n          />\n          <FooterLink to=\"/transport\" icon=\"directions_car\" title=\"Transport\" />\n          <FooterLink to=\"/beds\" icon=\"hotel\" title=\"Sur Place\" />\n        </div>\n      )}\n    </>\n  )\n}\n\nexport default Layout\n","module.exports = __webpack_public_path__ + \"static/media/logo.75a7e9e1.svg\";","import { useState, useEffect, useContext } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport JwtContext from '../JwtContext'\n\n// Return [ User, Loading, Error ]\nconst useCurrentUser = () => {\n  const { jsonWebToken, user, setUser } = useContext(JwtContext)\n  const history = useHistory()\n  const [loading, setLoading] = useState(false)\n\n  const updateUser = updatedUser => {\n    setUser(updatedUser)\n    fetch('/users/me/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        jsonWebToken,\n        user: updatedUser\n      })\n    })\n  }\n\n  useEffect(() => {\n    if (user) {\n      return\n    }\n\n    setLoading(true)\n    fetch('/users/me?jsonWebToken=' + jsonWebToken)\n      .then(response => {\n        if (response && !response.redirected) {\n          return response.json()\n        }\n\n        if (response.redirected) {\n          history.push(response.url)\n          return null\n        }\n      })\n      .then(data => {\n        if (data && data.user) {\n          setUser(data.user)\n          setLoading(false)\n        } else if (data.redirected) {\n          window.location.href = data.url\n        }\n      })\n      .catch()\n  }, [jsonWebToken, user, setUser, history])\n\n  return [user, loading, updateUser]\n}\n\nexport default useCurrentUser\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport arrow from '../../assets/arrow.svg'\n\nconst NextPageArrow = ({ target, label, onClick }) => {\n  return (\n    <Link to={target} onClick={onClick} className=\"NextPageArrow__link\">\n      <span>{label}</span>\n      <img src={arrow} alt=\"Arrow Icon\" />\n    </Link>\n  )\n}\n\nexport default NextPageArrow\n","module.exports = __webpack_public_path__ + \"static/media/arrow.aeb9504d.svg\";","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import React, { useRef, useState, useEffect } from 'react'\nimport Layout from '../components/Layout'\nimport { SimpleLoader } from '../components/Loader'\nimport NextPageArrow from '../components/NextPageArrow'\nimport useCurrentUser from '../hooks/useCurrentUser'\n\nconst Beds = () => {\n  const [user, loading, updateUser] = useCurrentUser()\n  const [mealPref, setMealPref] = useState('')\n  const [saving, setSaving] = useState(false)\n  const debouncedCall = useRef(null)\n\n  useEffect(() => {\n    if (!loading && user) {\n      setMealPref(user.mealPref)\n    }\n  }, [loading])\n\n  const updateMealPref = e => {\n    const val = e.target.value\n\n    setMealPref(val)\n    setSaving(true)\n\n    if (debouncedCall.current) {\n      clearTimeout(debouncedCall.current)\n    }\n\n    debouncedCall.current = setTimeout(() => {\n      setSaving(false)\n      updateUser({\n        ...user,\n        mealPref: val\n      })\n    }, 200)\n  }\n\n  const setUpdatedInfos = () => {\n    updateUser({\n      ...user,\n      hasUpdatedInfos: true\n    })\n  }\n\n  return (\n    <Layout>\n      <div className=\"Guest__intro\">\n        <div className=\"Guest__intro--heading\">\n          Si tu as des allergies, si t'aimes pas les carottes rapées ou si tu as\n          un régime particulier\n        </div>\n        <div className=\"Guest__intro--content\">\n          Dis nous tout c'est le moment, on le dira pas à ta mère\n        </div>\n      </div>\n      {loading || !user ? (\n        <div className=\"HomeEmpty\">\n          <SimpleLoader />\n        </div>\n      ) : (\n        <div className=\"Guest__container\">\n          <textarea\n            onChange={updateMealPref}\n            value={mealPref}\n            className=\"MealPref__input\"\n          />\n        </div>\n      )}\n      {saving ? null : (\n        <NextPageArrow\n          target=\"/\"\n          label=\"C'est fini !\"\n          onClick={setUpdatedInfos}\n        />\n      )}\n    </Layout>\n  )\n}\n\nexport default Beds\n"],"sourceRoot":""}
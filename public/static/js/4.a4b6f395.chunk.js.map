{"version":3,"sources":["js/components/Layout.js","assets/logo.svg","js/hooks/useCurrentUser.js","js/components/NextPageArrow.js","assets/arrow.svg","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","js/pages/Guest.js"],"names":["FooterLink","to","icon","title","selected","useLocation","pathname","routeToPreload","routes","find","route","path","onMouseEnter","undefined","component","preload","className","Layout","children","noFooter","alt","src","logo","module","exports","useCurrentUser","useContext","JwtContext","jsonWebToken","user","setUser","history","useHistory","useState","loading","setLoading","useEffect","fetch","then","response","redirected","json","push","url","data","window","location","href","catch","updatedUser","method","headers","body","JSON","stringify","NextPageArrow","target","label","onClick","arrow","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread2","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","PeopleAttending","people","index","updatePeople","checkInput","e","attending","name","type","id","checked","onChange","htmlFor","Guest","updateUser","updatedPeople","peoples","map","_id"],"mappings":"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","file":"static/js/4.a4b6f395.chunk.js","sourcesContent":["import React from 'react'\nimport logo from '../../assets/logo.svg'\nimport { Link, useLocation } from 'react-router-dom'\n\nimport routes from '../routes'\n\nconst FooterLink = ({ to, icon, title }) => {\n  const location = useLocation()\n  const selected = location.pathname === to\n  const routeToPreload = routes.find(route => {\n    return route.path === to\n  })\n\n  let onMouseEnter = undefined\n\n  if (routeToPreload) {\n    onMouseEnter = () => {\n      routeToPreload.component.preload()\n    }\n  }\n\n  return (\n    <Link\n      to={to}\n      onMouseEnter={onMouseEnter}\n      className={`Footer--link ${selected ? 'selected' : ''}`}\n    >\n      <i className=\"material-icons\">{icon}</i>\n      <b className=\"Footer--linkTitle\">{title}</b>\n    </Link>\n  )\n}\n\nconst Layout = ({ children, noFooter }) => {\n  return (\n    <>\n      <div className=\"Header\">\n        <img alt=\"Logo\" src={logo} className=\"Header--logo\" />\n      </div>\n      <div className=\"Header--padder\" />\n      {children}\n      {noFooter ? null : (\n        <div className=\"Footer\">\n          <FooterLink to=\"/\" icon=\"assignment_turned_in\" title=\"Statut\" />\n          <FooterLink\n            to=\"/guest\"\n            icon=\"sentiment_very_satisfied\"\n            title=\"Invités\"\n          />\n          <FooterLink to=\"/transport\" icon=\"directions_car\" title=\"Transport\" />\n          <FooterLink to=\"/beds\" icon=\"hotel\" title=\"Sur Place\" />\n        </div>\n      )}\n    </>\n  )\n}\n\nexport default Layout\n","module.exports = __webpack_public_path__ + \"static/media/logo.75a7e9e1.svg\";","import { useState, useEffect, useContext } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport JwtContext from '../JwtContext'\n\n// Return [ User, Loading, Error ]\nconst useCurrentUser = () => {\n  const { jsonWebToken, user, setUser } = useContext(JwtContext)\n  const history = useHistory()\n  const [loading, setLoading] = useState(false)\n\n  const updateUser = updatedUser => {\n    setUser(updatedUser)\n    fetch('/users/me/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        jsonWebToken,\n        user: updatedUser\n      })\n    })\n  }\n\n  useEffect(() => {\n    if (user) {\n      return\n    }\n\n    setLoading(true)\n    fetch('/users/me?jsonWebToken=' + jsonWebToken)\n      .then(response => {\n        if (response && !response.redirected) {\n          return response.json()\n        }\n\n        if (response.redirected) {\n          history.push(response.url)\n          return null\n        }\n      })\n      .then(data => {\n        if (data && data.user) {\n          setUser(data.user)\n          setLoading(false)\n        } else if (data.redirected) {\n          window.location.href = data.url\n        }\n      })\n      .catch()\n  }, [jsonWebToken, user, setUser, history])\n\n  return [user, loading, updateUser]\n}\n\nexport default useCurrentUser\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport arrow from '../../assets/arrow.svg'\n\nconst NextPageArrow = ({ target, label, onClick }) => {\n  return (\n    <Link to={target} onClick={onClick} className=\"NextPageArrow__link\">\n      <span>{label}</span>\n      <img src={arrow} alt=\"Arrow Icon\" />\n    </Link>\n  )\n}\n\nexport default NextPageArrow\n","module.exports = __webpack_public_path__ + \"static/media/arrow.aeb9504d.svg\";","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import React from 'react'\nimport Layout from '../components/Layout'\nimport { SimpleLoader } from '../components/Loader'\nimport NextPageArrow from '../components/NextPageArrow'\nimport useCurrentUser from '../hooks/useCurrentUser'\n\nconst PeopleAttending = ({ people, index, updatePeople }) => {\n  const checkInput = e => {\n    const { value } = e.target\n\n    updatePeople({ ...people, attending: value }, index)\n  }\n\n  return (\n    <div className=\"Guest__peopleContainer\">\n      <div>{people.name}</div>\n      <div className=\"Guest__peopleSelector\">\n        <div className=\"Guest__peopleInput\">\n          <input\n            type=\"radio\"\n            id={people.name + '-oui'}\n            value=\"oui\"\n            checked={people.attending === 'oui'}\n            name={people.name + '_attending'}\n            onChange={checkInput}\n          />\n          <label htmlFor={people.name + '-oui'}>Vient</label>\n        </div>\n        <div className=\"Guest__peopleInput\">\n          <input\n            type=\"radio\"\n            id={people.name + '-non'}\n            value=\"non\"\n            checked={people.attending === 'non'}\n            name={people.name + '_attending'}\n            onChange={checkInput}\n          />\n          <label htmlFor={people.name + '-non'}>Ne vient pas</label>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst Guest = () => {\n  const [user, loading, updateUser] = useCurrentUser()\n  const updatePeople = (updatedPeople, i) => {\n    updateUser({\n      ...user,\n      peoples: user.peoples.map((people, index) =>\n        index === i ? updatedPeople : people\n      )\n    })\n  }\n\n  return (\n    <Layout>\n      <div className=\"Guest__intro\">\n        <div className=\"Guest__intro--heading\">\n          Ici tu peux confirmer ou non la présence de chacun\n        </div>\n        <div className=\"Guest__intro--content\">\n          Si tu ne sais pas encore pour tout le monde tu pourra revenir plus\n          tard pour compléter. <br />\n          Si nous avons oublié quelqu’un n’hésites pas à nous appeler ou faire\n          un email.\n        </div>\n      </div>\n      {loading ? (\n        <div className=\"HomeEmpty\">\n          <SimpleLoader />\n        </div>\n      ) : (\n        <div className=\"Guest__container\">\n          {user &&\n            user.peoples.map((people, index) => (\n              <PeopleAttending\n                people={people}\n                key={people._id}\n                index={index}\n                updatePeople={updatePeople}\n              />\n            ))}\n        </div>\n      )}\n      <NextPageArrow target=\"/transport\" label=\"En bus, en voiture ?\" />\n    </Layout>\n  )\n}\n\nexport default Guest\n"],"sourceRoot":""}
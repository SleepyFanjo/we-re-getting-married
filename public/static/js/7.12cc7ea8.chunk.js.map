{"version":3,"sources":["js/components/Link.js","js/components/Layout.js","assets/logo.svg","js/hooks/useCurrentUser.js","js/pages/Home.js"],"names":["Link","to","icon","title","selected","useLocation","pathname","routeToPreload","routes","find","route","path","onMouseEnter","undefined","component","preload","className","Layout","children","noFooter","alt","src","logo","module","exports","useCurrentUser","useContext","JwtContext","jsonWebToken","user","setUser","history","useHistory","useState","loading","setLoading","useEffect","fetch","then","response","redirected","json","push","url","data","window","location","href","catch","updatedUser","method","headers","body","JSON","stringify","HomeEmpty","Dashboard","Home","hasUpdatedInfos"],"mappings":"mGAAA,2CAgCeA,IA3BF,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,GAAIC,EAAkB,EAAlBA,KAAMC,EAAY,EAAZA,MAElBC,EADWC,cACSC,WAAaL,EACjCM,EAAiBC,IAAOC,MAAK,SAAAC,GACjC,OAAOA,EAAMC,OAASV,KAGpBW,OAAeC,EAQnB,OANIN,IACFK,EAAe,WACbL,EAAeO,UAAUC,YAK3B,kBAAC,IAAD,CACEd,GAAIA,EACJW,aAAcA,EACdI,UAAS,eAAUZ,EAAW,WAAa,KAE3C,uBAAGY,UAAU,kBAAkBd,GAC/B,uBAAGc,UAAU,mBAAmBb,M,gCC3BtC,6CAwBec,IApBA,SAAC,GAA4B,IAA1BC,EAAyB,EAAzBA,SAAUC,EAAe,EAAfA,SAC1B,OACE,oCACE,yBAAKH,UAAU,UACb,yBAAKI,IAAI,OAAOC,IAAKC,IAAMN,UAAU,kBAEvC,yBAAKA,UAAU,mBACdE,EACAC,EAAW,KACV,yBAAKH,UAAU,UACb,kBAAC,IAAD,CAAMf,GAAG,IAAIC,KAAK,uBAAuBC,MAAM,WAC/C,kBAAC,IAAD,CAAMF,GAAG,SAASC,KAAK,2BAA2BC,MAAM,eACxD,kBAAC,IAAD,CAAMF,GAAG,aAAaC,KAAK,iBAAiBC,MAAM,cAClD,kBAAC,IAAD,CAAMF,GAAG,QAAQC,KAAK,QAAQC,MAAM,kB,mBCjB9CoB,EAAOC,QAAU,IAA0B,kC,iECuD5BC,IAlDQ,WAAO,IAAD,EACaC,qBAAWC,KAA3CC,EADmB,EACnBA,aAAcC,EADK,EACLA,KAAMC,EADD,EACCA,QACtBC,EAAUC,cAFW,EAGGC,oBAAS,GAHZ,mBAGpBC,EAHoB,KAGXC,EAHW,KA+C3B,OA5BAC,qBAAU,WACJP,IAIJM,GAAW,GACXE,MAAM,0BAA4BT,GAC/BU,MAAK,SAAAC,GACJ,OAAIA,IAAaA,EAASC,WACjBD,EAASE,OAGdF,EAASC,YACXT,EAAQW,KAAKH,EAASI,KACf,WAFT,KAKDL,MAAK,SAAAM,GACAA,GAAQA,EAAKf,MACfC,EAAQc,EAAKf,MACbM,GAAW,IACFS,EAAKJ,aACdK,OAAOC,SAASC,KAAOH,EAAKD,QAG/BK,WACF,CAACpB,EAAcC,EAAMC,EAASC,IAE1B,CAACF,EAAMK,EA1CK,SAAAe,GACjBnB,EAAQmB,GACRZ,MAAM,aAAc,CAClBa,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnB1B,eACAC,KAAMoB,U,0GCZRM,EAAY,WAChB,OACE,yBAAKvC,UAAU,aACb,mDACuB,6BADvB,sDAIA,kBAAC,IAAD,CAAYf,GAAG,SAASe,UAAU,UAAlC,gBAOAwC,EAAY,WAChB,OACE,oCACE,yBAAKxC,UAAU,gBACb,yBAAKA,UAAU,yBAAf,WACA,yBAAKA,UAAU,yBAAf,mFAEQ,6BACN,6BAHF,uDAKE,kBAAC,IAAD,CAAMf,GAAG,MAAMC,KAAK,qBAyBfuD,UAlBF,WAAO,IAAD,EACOhC,cADP,mBACVI,EADU,KACJK,EADI,KAGjB,OACE,kBAAC,IAAD,KACGA,IAAYL,EACX,yBAAKb,UAAU,aACb,kBAAC,IAAD,OAEAa,GAAQA,EAAK6B,gBACf,kBAACF,EAAD,MAEA,kBAACD,EAAD","file":"static/js/7.12cc7ea8.chunk.js","sourcesContent":["import React from 'react'\nimport { Link as RouterLink, useLocation } from 'react-router-dom'\n\nimport routes from '../routes'\n\nconst Link = ({ to, icon, title }) => {\n  const location = useLocation()\n  const selected = location.pathname === to\n  const routeToPreload = routes.find(route => {\n    return route.path === to\n  })\n\n  let onMouseEnter = undefined\n\n  if (routeToPreload) {\n    onMouseEnter = () => {\n      routeToPreload.component.preload()\n    }\n  }\n\n  return (\n    <RouterLink\n      to={to}\n      onMouseEnter={onMouseEnter}\n      className={`Link ${selected ? 'selected' : ''}`}\n    >\n      <i className=\"material-icons\">{icon}</i>\n      <b className=\"Link--linkTitle\">{title}</b>\n    </RouterLink>\n  )\n}\n\nexport default Link\n","import React from 'react'\nimport logo from '../../assets/logo.svg'\nimport Link from './Link'\n\nconst Layout = ({ children, noFooter }) => {\n  return (\n    <>\n      <div className=\"Header\">\n        <img alt=\"Logo\" src={logo} className=\"Header--logo\" />\n      </div>\n      <div className=\"Header--padder\" />\n      {children}\n      {noFooter ? null : (\n        <div className=\"Footer\">\n          <Link to=\"/\" icon=\"assignment_turned_in\" title=\"Statut\" />\n          <Link to=\"/guest\" icon=\"sentiment_very_satisfied\" title=\"Invités\" />\n          <Link to=\"/transport\" icon=\"directions_car\" title=\"Transport\" />\n          <Link to=\"/beds\" icon=\"hotel\" title=\"Sur Place\" />\n        </div>\n      )}\n    </>\n  )\n}\n\nexport default Layout\n","module.exports = __webpack_public_path__ + \"static/media/logo.75a7e9e1.svg\";","import { useState, useEffect, useContext } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport JwtContext from '../JwtContext'\n\n// Return [ User, Loading, Error ]\nconst useCurrentUser = () => {\n  const { jsonWebToken, user, setUser } = useContext(JwtContext)\n  const history = useHistory()\n  const [loading, setLoading] = useState(false)\n\n  const updateUser = updatedUser => {\n    setUser(updatedUser)\n    fetch('/users/me/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        jsonWebToken,\n        user: updatedUser\n      })\n    })\n  }\n\n  useEffect(() => {\n    if (user) {\n      return\n    }\n\n    setLoading(true)\n    fetch('/users/me?jsonWebToken=' + jsonWebToken)\n      .then(response => {\n        if (response && !response.redirected) {\n          return response.json()\n        }\n\n        if (response.redirected) {\n          history.push(response.url)\n          return null\n        }\n      })\n      .then(data => {\n        if (data && data.user) {\n          setUser(data.user)\n          setLoading(false)\n        } else if (data.redirected) {\n          window.location.href = data.url\n        }\n      })\n      .catch()\n  }, [jsonWebToken, user, setUser, history])\n\n  return [user, loading, updateUser]\n}\n\nexport default useCurrentUser\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport Link from '../components/Link'\nimport { SimpleLoader } from '../components/Loader'\nimport { Link as RouterLink } from 'react-router-dom'\nimport useCurrentUser from '../hooks/useCurrentUser'\n\nconst HomeEmpty = () => {\n  return (\n    <div className=\"HomeEmpty\">\n      <p>\n        Tu viens ? Avec qui ?<br />\n        Aide nous à organiser ce beau week-end ensemble\n      </p>\n      <RouterLink to=\"/guest\" className=\"Button\">\n        Je viens !\n      </RouterLink>\n    </div>\n  )\n}\n\nconst Dashboard = () => {\n  return (\n    <>\n      <div className=\"Guest__intro\">\n        <div className=\"Guest__intro--heading\">Merci !</div>\n        <div className=\"Guest__intro--content\">\n          Tu peux à tout moment changer tes infos en utilisant le menu en bas de\n          page. <br />\n          <br />\n          Tu peux aussi consulter la Foire Aux Questions ici :\n          <Link to=\"faq\" icon=\"help_outline\" />\n        </div>\n      </div>\n    </>\n  )\n}\n\nconst Home = () => {\n  const [user, loading] = useCurrentUser()\n\n  return (\n    <Layout>\n      {loading || !user ? (\n        <div className=\"HomeEmpty\">\n          <SimpleLoader />\n        </div>\n      ) : user && user.hasUpdatedInfos ? (\n        <Dashboard />\n      ) : (\n        <HomeEmpty />\n      )}\n    </Layout>\n  )\n}\n\nexport default Home\n"],"sourceRoot":""}
{"version":3,"sources":["js/components/Layout.js","assets/logo.svg","js/components/LoginForm.js","js/pages/Login.js"],"names":["FooterLink","to","icon","title","selected","useLocation","pathname","routeToPreload","routes","find","route","path","onMouseEnter","undefined","component","preload","className","Layout","children","noFooter","alt","src","logo","module","exports","LoginForm","history","useHistory","useContext","JwtContext","setJsonWebToken","setUser","useState","password","setPassword","email","setEmail","error","setError","loading","setLoading","onPasswordChange","useCallback","e","target","value","onEmailChange","submitInfos","fetch","method","headers","body","JSON","stringify","then","response","json","postCredentials","data","token","user","localStorage","setItem","push","onSubmit","preventDefault","name","type","onChange","placeholder","Loader","aria-label","Login"],"mappings":"mGAAA,4DAMMA,EAAa,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,GAAIC,EAAkB,EAAlBA,KAAMC,EAAY,EAAZA,MAExBC,EADWC,cACSC,WAAaL,EACjCM,EAAiBC,IAAOC,MAAK,SAAAC,GACjC,OAAOA,EAAMC,OAASV,KAGpBW,OAAeC,EAQnB,OANIN,IACFK,EAAe,WACbL,EAAeO,UAAUC,YAK3B,kBAAC,IAAD,CACEd,GAAIA,EACJW,aAAcA,EACdI,UAAS,uBAAkBZ,EAAW,WAAa,KAEnD,uBAAGY,UAAU,kBAAkBd,GAC/B,uBAAGc,UAAU,qBAAqBb,KA6BzBc,IAxBA,SAAC,GAA4B,IAA1BC,EAAyB,EAAzBA,SAAUC,EAAe,EAAfA,SAC1B,OACE,oCACE,yBAAKH,UAAU,UACb,yBAAKI,IAAI,OAAOC,IAAKC,IAAMN,UAAU,kBAEvC,yBAAKA,UAAU,mBACdE,EACAC,EAAW,KACV,yBAAKH,UAAU,UACb,kBAAChB,EAAD,CAAYC,GAAG,IAAIC,KAAK,uBAAuBC,MAAM,WACrD,kBAACH,EAAD,CACEC,GAAG,SACHC,KAAK,2BACLC,MAAM,eAER,kBAACH,EAAD,CAAYC,GAAG,aAAaC,KAAK,iBAAiBC,MAAM,cACxD,kBAACH,EAAD,CAAYC,GAAG,QAAQC,KAAK,QAAQC,MAAM,kB,mBClDpDoB,EAAOC,QAAU,IAA0B,kC,iGCuF5BC,EArEG,WAChB,IAAMC,EAAUC,cADM,EAEeC,qBAAWC,KAAxCC,EAFc,EAEdA,gBAAiBC,EAFH,EAEGA,QAFH,EAGUC,mBAAS,IAHnB,mBAGfC,EAHe,KAGLC,EAHK,OAIIF,mBAAS,IAJb,mBAIfG,EAJe,KAIRC,EAJQ,OAKIJ,mBAAS,IALb,mBAKfK,EALe,KAKRC,EALQ,OAMQN,oBAAS,GANjB,mBAMfO,EANe,KAMNC,EANM,KAQhBC,EAAmBC,uBAAY,SAAAC,GAAC,OAAIT,EAAYS,EAAEC,OAAOC,SAAQ,IACjEC,EAAgBJ,uBAAY,SAAAC,GAAC,OAAIP,EAASO,EAAEC,OAAOC,SAAQ,IAE3DE,EAAc,SAACZ,EAAOF,GAC1BO,GAAW,GACXF,EAAS,IA1BW,SAACH,EAAOF,GAC9B,OAAOe,MAAM,eAAgB,CAC3BC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBlB,QACAF,eAEDqB,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAiB3BC,CAAgBtB,EAAOF,GAAUqB,MAAK,SAAAI,GAChCA,EAAKrB,OACPC,EAASoB,EAAKrB,OACdG,GAAW,KAEXV,EAAgB4B,EAAKC,OACrB5B,EAAQ2B,EAAKE,MACbC,aAAaC,QAAQ,WAAYJ,EAAKC,OACtCjC,EAAQqC,KAAK,UAKnB,OACE,yBAAK/C,UAAU,oBACb,0BACEA,UAAU,yBACVgD,SAAU,SAAArB,GACRA,EAAEsB,iBACFlB,EAAYZ,EAAOF,KAGrB,2BACEjB,UAAU,eACVkD,KAAK,QACLC,KAAK,QACLtB,MAAOV,EACPiC,SAAUtB,EACVuB,YAAY,uBAEd,2BACErD,UAAU,eACVkD,KAAK,WACLC,KAAK,WACLtB,MAAOZ,EACPmC,SAAU3B,EACV4B,YAAY,iBAEbhC,GAAS,yBAAKrB,UAAU,gBAAgBqB,GACxCE,EACC,kBAAC+B,EAAA,EAAD,CAAQtD,UAAU,gBAAgBuD,aAAW,YAE7C,4BACEJ,KAAK,SACLnD,UAAU,uBACVuD,aAAW,WAHb,mBC9DKC,UARD,WACZ,OACE,kBAACvD,EAAA,EAAD,CAAQE,UAAQ,GACd,kBAAC,EAAD","file":"static/js/8.f45cff39.chunk.js","sourcesContent":["import React from 'react'\nimport logo from '../../assets/logo.svg'\nimport { Link, useLocation } from 'react-router-dom'\n\nimport routes from '../routes'\n\nconst FooterLink = ({ to, icon, title }) => {\n  const location = useLocation()\n  const selected = location.pathname === to\n  const routeToPreload = routes.find(route => {\n    return route.path === to\n  })\n\n  let onMouseEnter = undefined\n\n  if (routeToPreload) {\n    onMouseEnter = () => {\n      routeToPreload.component.preload()\n    }\n  }\n\n  return (\n    <Link\n      to={to}\n      onMouseEnter={onMouseEnter}\n      className={`Footer--link ${selected ? 'selected' : ''}`}\n    >\n      <i className=\"material-icons\">{icon}</i>\n      <b className=\"Footer--linkTitle\">{title}</b>\n    </Link>\n  )\n}\n\nconst Layout = ({ children, noFooter }) => {\n  return (\n    <>\n      <div className=\"Header\">\n        <img alt=\"Logo\" src={logo} className=\"Header--logo\" />\n      </div>\n      <div className=\"Header--padder\" />\n      {children}\n      {noFooter ? null : (\n        <div className=\"Footer\">\n          <FooterLink to=\"/\" icon=\"assignment_turned_in\" title=\"Statut\" />\n          <FooterLink\n            to=\"/guest\"\n            icon=\"sentiment_very_satisfied\"\n            title=\"InvitÃ©s\"\n          />\n          <FooterLink to=\"/transport\" icon=\"directions_car\" title=\"Transport\" />\n          <FooterLink to=\"/beds\" icon=\"hotel\" title=\"Sur Place\" />\n        </div>\n      )}\n    </>\n  )\n}\n\nexport default Layout\n","module.exports = __webpack_public_path__ + \"static/media/logo.75a7e9e1.svg\";","import React, { useState, useContext, useCallback } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { SimpleLoader as Loader } from './Loader'\nimport JwtContext from '../JwtContext'\n\nconst postCredentials = (email, password) => {\n  return fetch('/users/login', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email,\n      password\n    })\n  }).then(response => response.json())\n}\n\nconst LoginForm = () => {\n  const history = useHistory()\n  const { setJsonWebToken, setUser } = useContext(JwtContext)\n  const [password, setPassword] = useState('')\n  const [email, setEmail] = useState('')\n  const [error, setError] = useState('')\n  const [loading, setLoading] = useState(false)\n\n  const onPasswordChange = useCallback(e => setPassword(e.target.value), [])\n  const onEmailChange = useCallback(e => setEmail(e.target.value), [])\n\n  const submitInfos = (email, password) => {\n    setLoading(true)\n    setError('')\n    postCredentials(email, password).then(data => {\n      if (data.error) {\n        setError(data.error)\n        setLoading(false)\n      } else {\n        setJsonWebToken(data.token)\n        setUser(data.user)\n        localStorage.setItem('jwtToken', data.token)\n        history.push('/')\n      }\n    })\n  }\n\n  return (\n    <div className=\"Login--container\">\n      <form\n        className=\"Login--input-container\"\n        onSubmit={e => {\n          e.preventDefault()\n          submitInfos(email, password)\n        }}\n      >\n        <input\n          className=\"Login--input\"\n          name=\"email\"\n          type=\"email\"\n          value={email}\n          onChange={onEmailChange}\n          placeholder=\"exemple@domain.com\"\n        />\n        <input\n          className=\"Login--input\"\n          name=\"password\"\n          type=\"password\"\n          value={password}\n          onChange={onPasswordChange}\n          placeholder=\"Mot de passe\"\n        />\n        {error && <div className=\"Login--error\">{error}</div>}\n        {loading ? (\n          <Loader className=\"Login--loader\" aria-label=\"Loading\" />\n        ) : (\n          <button\n            type=\"submit\"\n            className=\"Button Login--submit\"\n            aria-label=\"Valider\"\n          >\n            Se connecter\n          </button>\n        )}\n      </form>\n    </div>\n  )\n}\n\nexport default LoginForm\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport LoginForm from '../components/LoginForm'\n\nconst Login = () => {\n  return (\n    <Layout noFooter>\n      <LoginForm />\n    </Layout>\n  )\n}\n\nexport default Login\n"],"sourceRoot":""}